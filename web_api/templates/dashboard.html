{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<h1 style="margin-bottom: 2rem;">Dashboard</h1>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 10px;">
        <h3 style="margin-bottom: 0.5rem;">Welcome back!</h3>
        <p>{{ current_user.name }}</p>
        <p style="font-size: 0.9rem; opacity: 0.9;">{{ current_user.email }}</p>
    </div>
    
    <div style="background: #f8f9fa; padding: 2rem; border-radius: 10px;">
        <h3 style="margin-bottom: 0.5rem; color: #667eea;">Account Status</h3>
        {% if current_user.is_admin %}
        <p><span class="badge badge-admin">Administrator</span></p>
        <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">You have full access to manage users and requests</p>
        {% elif current_user.is_pending_admin %}
        <p><span class="badge badge-pending">Admin Request Pending</span></p>
        <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">Your request is being reviewed</p>
        {% else %}
        <p>Standard User</p>
        <form method="POST" action="{{ url_for('request_admin') }}" style="margin-top: 1rem;">
            <button type="submit" class="btn btn-primary">Request Admin Access</button>
        </form>
        {% endif %}
    </div>
    
    <div style="background: #f8f9fa; padding: 2rem; border-radius: 10px;">
        <h3 style="margin-bottom: 0.5rem; color: #667eea;">Member Since</h3>
        <p>{{ current_user.created_at.strftime('%B %d, %Y') }}</p>
        <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">Last login: {{ current_user.last_login.strftime('%B %d, %Y at %I:%M %p') }}</p>
    </div>
</div>

{% if current_user.is_admin and pending_requests %}
<div style="background: #fff3cd; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #ffc107; margin-bottom: 2rem;">
    <h3 style="color: #856404; margin-bottom: 1rem;">⚠️ Pending Admin Requests</h3>
    <p style="color: #856404; margin-bottom: 1rem;">You have {{ pending_requests|length }} pending admin request(s) to review</p>
    <a href="{{ url_for('admin_requests') }}" class="btn btn-primary">Review Requests</a>
</div>
{% endif %}

<div style="background: #e7f3ff; padding: 2rem; border-radius: 10px; margin-top: 2rem;">
    <h3 style="color: #667eea; margin-bottom: 1rem;">Quick Actions</h3>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        {% if current_user.is_admin %}
        <a href="{{ url_for('admin_users') }}" class="btn btn-secondary">Manage Users</a>
        <a href="{{ url_for('admin_requests') }}" class="btn btn-secondary">Admin Requests</a>
        {% else %}
        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">View Profile</a>
        {% endif %}
        <a href="{{ url_for('logout') }}" class="btn btn-secondary">Logout</a>
    </div>
</div>
{% endblock %}
